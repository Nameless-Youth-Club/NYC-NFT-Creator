const { expect } = require("chai");
const { ethers } = require("hardhat");
const fs = require('fs');
const path = require('path');
const RLEtoSVG = require('../image-processing/RLEtoSVG');
const { type } = require("os");

//[topY, rightX, bottomY, leftX]

let owner;
let addr1;
let addr2;

describe("Hardhat test network", function () {
  it("Should return the new greeting once it's changed", async function () {
    [owner, addr1, addr2] = await ethers.getSigners();
    const nftContractFactory = await hre.ethers.getContractFactory('NYCDescriptor');
    const nftDescriptor = await nftContractFactory.deploy();
    await nftDescriptor.deployed();
    console.log("Descriptor Contract deployed to:", nftDescriptor.address);

    const nftContractFactorySeeder = await hre.ethers.getContractFactory('NYCSeeder');
    const nftSeeder = await nftContractFactorySeeder.deploy();
    await nftSeeder.deployed();
    console.log("Seeder Contract deployed to:", nftSeeder.address);


    //HEAD ------------------------------
    // let filenameHead = path.normalize(__dirname + "/../Palettes/RLE_Colors_head.txt")
    // const allFileContentsHead = fs.readFileSync(filenameHead, 'utf-8');
    // allFileContentsHead.split(/\r?\n/).forEach(async (line) =>  {
    //   if (line != "") {
    //        line = line.substring(1, line.length - 1)
    //        line = line.split(', ')
    //        txn = await nftDescriptor.addManyColorsToHeadPalette(line)
    //        await txn.wait()
    //   }
    // });
    const headPalettes = [

      ['#00000000', '#25202e', '#2e2534', '#3e3143', '#433749', '#312a3c', '#69577a', '#201a26', '#100e17', '#00040a', '#544662', '#181420', '#080b13', '#5f4d68', '#806d90', '#181a26', '#413f5e', '#4c456c', '#090e1d', '#11121d', '#3b364b', '#50415a', '#79607e', '#08040a', '#696286', '#816688', '#333044', '#3d2a2e', '#5c526d', '#1d1717', '#2a2b3b', '#000204', '#433b50', '#57445a', '#09090c', '#1b0f0f', '#281d20', '#2d2128', '#6e5a73', '#120a0c', '#241612', '#2e1c15', '#1b1105', '#160800', '#22120a', '#0a0404'],

['#00000000', '#d6c7ba', '#ffe4d0', '#313c06', '#354306', '#fffff2', '#546b0b', '#b6a397', '#5b565a', '#001b2a', '#435609', '#8a7c7f', '#2f414c', '#4c5e09', '#66850c', '#8aa39a', '#344d08', '#3d5409', '#335973', '#626e75', '#2f4207', '#405008', '#61750b', '#2c182a', '#54780c', '#677d0c', '#ffffff', '#ffffb7', '#496409', '#a38b5d', '#f0ffed', '#000c0f', '#364807', '#455308', '#333831', '#985f3d', '#e5b27f', '#ffcaa1', '#586e0a', '#663e2e', '#cb8547', '#ffac53', '#986b16', '#7b2f00', '#c06e2a', '#361b0f'],



     ]
    
    let txn = await nftDescriptor.addManyPalettesToHeadPalette(headPalettes)
    await txn.wait()

    const headImage = [180, 620, 880, 140, 10, 0, 1, 1, 1, 2, 1, 3, 1, 4, 1, 5, 1, 0, 1, 6, 7, 0, 7, 0, 1, 1, 1, 7, 1, 1, 1, 7, 1, 8, 1, 7, 1, 8, 1, 9, 2, 7, 1, 10, 6, 0, 6, 0, 1, 5, 1, 2, 1, 9, 1, 8, 2, 11, 1, 8, 1, 11, 1, 7, 1, 9, 1, 7, 1, 9, 1, 1, 5, 0, 4, 0, 1, 1, 1, 12, 1, 2, 1, 8, 1, 11, 1, 8, 2, 11, 1, 9, 3, 11, 1, 12, 1, 7, 1, 12, 1, 1, 4, 0, 4, 0, 1, 8, 1, 11, 1, 8, 3, 7, 1, 11, 1, 8, 1, 13, 1, 12, 2, 8, 1, 12, 2, 8, 2, 11, 3, 0, 3, 0, 1, 8, 1, 11, 1, 7, 1, 11, 1, 14, 1, 1, 2, 7, 1, 11, 1, 15, 2, 11, 1, 7, 1, 9, 1, 11, 1, 7, 2, 9, 1, 4, 2, 0, 3, 0, 1, 3, 1, 7, 2, 11, 1, 7, 1, 16, 1, 9, 1, 8, 1, 9, 1, 8, 1, 7, 1, 9, 1, 8, 1, 7, 3, 9, 1, 8, 1, 5, 2, 0, 3, 0, 1, 5, 1, 12, 1, 11, 1, 7, 1, 11, 2, 7, 3, 11, 1, 9, 1, 17, 2, 8, 1, 9, 1, 11, 1, 8, 1, 11, 1, 12, 1, 15, 1, 0, 2, 0, 1, 7, 1, 1, 1, 11, 2, 8, 1, 12, 3, 11, 2, 9, 1, 11, 2, 9, 1, 11, 1, 7, 1, 8, 1, 9, 2, 8, 1, 11, 1, 0, 2, 0, 1, 5, 1, 6, 2, 11, 1, 12, 1, 11, 1, 9, 1, 8, 1, 1, 1, 9, 1, 7, 1, 8, 3, 11, 1, 18, 1, 19, 1, 8, 2, 9, 1, 7, 1, 0, 1, 0, 1, 20, 2, 7, 2, 8, 1, 12, 1, 8, 1, 11, 2, 8, 2, 7, 1, 9, 1, 21, 2, 9, 1, 7, 2, 9, 1, 12, 1, 2, 1, 8, 1, 7, 1, 0, 1, 5, 1, 11, 1, 22, 1, 11, 1, 23, 1, 11, 1, 1, 1, 9, 5, 11, 3, 8, 2, 9, 1, 11, 2, 9, 2, 1, 1, 0, 1, 5, 1, 8, 1, 11, 1, 9, 1, 7, 1, 11, 1, 9, 1, 2, 1, 11, 1, 1, 1, 11, 1, 7, 1, 9, 2, 8, 5, 9, 1, 1, 1, 8, 1, 11, 1, 0, 1, 19, 1, 8, 1, 24, 1, 8, 1, 5, 1, 7, 3, 8, 3, 11, 1, 8, 1, 12, 2, 11, 2, 9, 1, 8, 1, 9, 1, 8, 1, 7, 1, 9, 1, 0, 1, 2, 1, 1, 1, 3, 1, 1, 1, 11, 1, 8, 1, 9, 1, 11, 1, 12, 1, 1, 1, 9, 1, 2, 1, 9, 1, 25, 3, 8, 2, 9, 2, 8, 1, 3, 1, 1, 1, 26, 2, 7, 2, 11, 1, 7, 1, 8, 1, 11, 1, 9, 1, 11, 1, 7, 1, 9, 1, 8, 3, 9, 1, 12, 1, 9, 1, 8, 1, 9, 2, 8, 1, 12, 1, 9, 1, 0, 1, 1, 1, 9, 1, 8, 1, 2, 3, 11, 2, 8, 1, 11, 1, 12, 1, 11, 1, 9, 1, 19, 1, 8, 1, 9, 1, 4, 4, 9, 1, 1, 1, 2, 1, 5, 1, 7, 1, 25, 1, 11, 1, 12, 1, 1, 1, 7, 1, 8, 1, 1, 1, 9, 1, 1, 1, 2, 1, 8, 3, 9, 1, 11, 2, 8, 1, 9, 1, 3, 2, 9, 1, 2, 1, 0, 1, 20, 1, 11, 1, 2, 1, 11, 1, 23, 1, 7, 1, 8, 2, 1, 1, 11, 1, 9, 1, 11, 1, 8, 1, 11, 1, 9, 1, 8, 1, 27, 1, 9, 1, 23, 1, 9, 2, 12, 1, 0, 1, 1, 1, 7, 1, 16, 1, 8, 1, 25, 1, 11, 2, 9, 1, 11, 1, 8, 1, 12, 1, 7, 1, 8, 1, 9, 1, 12, 1, 9, 1, 11, 1, 9, 1, 12, 1, 9, 1, 5, 1, 9, 1, 7, 1, 0, 1, 21, 1, 2, 1, 8, 1, 2, 1, 8, 1, 21, 1, 12, 2, 9, 1, 11, 1, 28, 1, 25, 1, 6, 1, 1, 1, 8, 3, 9, 1, 12, 1, 9, 1, 8, 1, 4, 1, 3, 1, 0, 1, 0, 1, 7, 1, 11, 1, 7, 2, 8, 1, 7, 1, 9, 1, 8, 1, 12, 1, 9, 1, 1, 1, 9, 1, 8, 1, 9, 1, 8, 1, 11, 1, 8, 1, 12, 1, 9, 1, 11, 1, 12, 1, 1, 1, 0, 2, 0, 3, 8, 1, 11, 1, 29, 1, 11, 1, 8, 1, 12, 1, 8, 1, 11, 1, 2, 1, 30, 1, 8, 1, 2, 1, 8, 2, 9, 1, 31, 1, 9, 1, 12, 1, 4, 1, 0, 2, 0, 1, 32, 1, 12, 1, 2, 1, 29, 1, 13, 1, 8, 1, 23, 1, 4, 1, 8, 1, 1, 1, 9, 1, 23, 1, 31, 1, 9, 1, 12, 1, 8, 1, 9, 1, 8, 1, 9, 1, 8, 2, 0, 3, 0, 1, 8, 1, 9, 1, 33, 1, 8, 1, 11, 1, 9, 1, 2, 1, 9, 1, 12, 1, 8, 1, 11, 2, 8, 4, 9, 1, 8, 1, 3, 2, 0, 4, 0, 1, 8, 1, 12, 1, 2, 1, 7, 1, 23, 1, 9, 1, 8, 1, 23, 2, 9, 1, 31, 2, 9, 1, 8, 1, 9, 1, 12, 1, 2, 1, 7, 2, 0, 4, 0, 1, 8, 1, 9, 1, 34, 1, 7, 1, 8, 1, 11, 1, 9, 2, 8, 1, 3, 4, 8, 2, 9, 1, 1, 1, 32, 2, 0, 4, 0, 1, 35, 1, 7, 1, 9, 1, 36, 1, 12, 1, 9, 1, 23, 1, 8, 1, 9, 1, 1, 4, 9, 1, 31, 1, 1, 1, 9, 3, 0, 4, 0, 1, 29, 1, 23, 1, 9, 1, 5, 1, 23, 2, 9, 1, 23, 2, 9, 2, 12, 2, 9, 1, 23, 2, 3, 3, 0, 5, 0, 1, 29, 1, 37, 1, 35, 1, 38, 1, 8, 1, 3, 1, 9, 1, 23, 1, 29, 1, 9, 2, 23, 1, 31, 1, 35, 1, 8, 4, 0, 6, 0, 1, 39, 1, 11, 1, 31, 1, 29, 1, 9, 1, 31, 1, 2, 2, 9, 1, 31, 3, 23, 1, 29, 4, 0, 7, 0, 1, 23, 1, 34, 1, 8, 1, 9, 1, 23, 1, 34, 1, 23, 1, 31, 1, 23, 1, 12, 1, 31, 1, 40, 1, 41, 4, 0, 8, 0, 1, 35, 1, 23, 1, 12, 1, 11, 1, 23, 1, 34, 1, 31, 1, 23, 1, 37, 1, 42, 1, 43, 5, 0, 10, 0, 2, 23, 1, 35, 1, 31, 1, 9, 1, 23, 1, 29, 1, 35, 6, 0, 11, 0, 1, 44, 2, 45, 1, 39, 1, 36, 1, 35, 7, 0]
    txn = await nftDescriptor.addHead(headImage)
    await txn.wait()

    //______________________________________________________________________________________________
    // SKIN -----------------------------------
    txn = await nftDescriptor.addPaletteToSkinPalette(['#00000000', '#efd2a5', '#3e1504', '#aa895e', '#ffecbe', '#58311d', '#6a4427', '#c3a27a', '#dfbb8c', '#6f5139', '#825a30', '#a27044', '#7b5c45', '#976334', '#876851', '#967554', '#a77b55'])
    txn = await nftDescriptor.addPaletteToSkinPalette(['#00000000', '#ad7628', '#2c0c01', '#7b4d17', '#c1842e', '#401b07', '#4c260a', '#8d5a1d', '#a16822', '#502d0e', '#5e320c', '#753f10', '#593311', '#6d380d', '#623a14', '#6c4114', '#794515'])
    txn = await nftDescriptor.addPaletteToSkinPalette(['#00000000', '#e0b685', '#3a1203', '#9f764c', '#facc99', '#532a17', '#633b20', '#b78c62', '#d1a171', '#68462e', '#794d27', '#976137', '#735038', '#8d562a', '#7e5a41', '#8c6544', '#9c6a45'])

    await txn.wait()
    const skinImage = [700, 420, 1060, 200,
      1, 0, 1, 1, 9, 0, 
      1, 2, 1, 3, 1, 4, 8, 0, 
      1, 5, 1, 6, 2, 4, 7, 0, 
      1, 5, 1, 6, 1, 7, 2, 1, 6, 0, 
      3, 6, 1, 3, 2, 8, 5, 0, 
      1, 9, 2, 6, 1, 10, 1, 11, 1, 3, 1, 11, 4, 0, 
      1, 12, 1, 9, 1, 6, 3, 10, 2, 11, 1, 13, 2, 10,
      1, 14, 1, 12, 1, 9, 1, 13, 2, 10, 2, 13, 1, 10, 2, 13, 
      2, 14, 1, 12, 1, 14, 1, 11, 1, 13, 5, 10, 
      3, 14, 2, 15, 1, 11, 5, 10, 
      1, 0, 3, 15, 2, 3, 2, 15, 2, 16, 1, 0,
      1, 0, 2, 15, 7, 3, 1, 0, 
      2, 0, 1, 3, 1, 16, 6, 3, 1, 0, 
      2, 0, 2, 15, 5, 3, 2, 0, 
      3, 0, 6, 3, 2, 0, 
      3, 0, 2, 15, 3, 3, 3, 0, 
      4, 0, 1, 14, 1, 15, 2, 11, 3, 0, 
      4, 0, 3, 14, 4, 0]
          
    txn = await nftDescriptor.addSkin(skinImage)
    await txn.wait()

    //_____________________________________________________________________________________________
    // JACKET --------------------------------------------

    // const filenameSkin = path.normalize(__dirname + "/../Palettes/RLE_Colors_body.txt")
    // const allFileContentsSkin = fs.readFileSync(filenameSkin, 'utf-8');
    // allFileContentsSkin.split(/\r?\n/).forEach(async (line) =>  {
    //   if (line != "") {
    //        line = line.substring(1, line.length - 1)
    //        line = line.split(', ')
    //        txn = await nftDescriptor.addManyColorsToJacketPalette(line)
    //        await txn.wait()
    //   }
    // });

    const jacketPalettes = [
      ['#00000000', '#bcd158', '#c5bd41', '#6e7328', '#faf44c', '#a48723', '#96761a', '#5c4e13', '#ded23d', '#754b0f', '#8b6113', '#522601', '#f5e23f', '#401a03', '#ffff5e', '#ffff54', '#cab22b', '#cfbb32', '#5c3c11', '#a4952a', '#603c03', '#4b2d0b', '#8f7f22', '#ffff5a', '#fff744', '#000000', '#443312', '#6c581d', '#efda36', '#b7a02a', '#ffff64', '#ffff52', '#ffff45', '#dec934', '#fff63c', '#a4ac40', '#7e7229', '#a79b31', '#ddb728', '#87650b', '#ffff4c', '#c38f17', '#b39823', '#927803', '#bca71a', '#b5be37', '#b1901c', '#af900c', '#ffff5c', '#b7a111', '#b7a102', '#b6ae33', '#ffff46', '#a47e02', '#ffff4d', '#caaa24', '#e4cc24', '#ffff6d', '#e8d118', '#e9b820', '#ffd931', '#b2b22b', '#9e8109'],

['#00000000', '#8c39ff', '#9334ce', '#635e4c', '#bb43f2', '#936e42', '#876131', '#524024', '#a639c2', '#693d1c', '#7d4f25', '#4a1f01', '#b73ec8', '#391505', '#d04eff', '#da4cff', '#b59251', '#ba995f', '#523120', '#937a4f', '#563106', '#432414', '#816840', '#ea53ff', '#c444d8', '#000000', '#3d2922', '#614737', '#b23cac', '#a5824f', '#fd5aff', '#e650ff', '#d347dc', '#a637a6', '#c643c0', '#938c79', '#725d4e', '#967f5d', '#c7954b', '#795314', '#cf47f2', '#af752c', '#a17c42', '#836205', '#a98932', '#a29c67', '#9f7635', '#9d7617', '#f857ff', '#a58420', '#a58404', '#a48e60', '#dd4dde', '#936704', '#d74cf4', '#b58b44', '#cda745', '#ff61ff', '#d0ab2d', '#d2973d', '#c43b9c', '#a09251', '#8e6912'],

['#00000000', '#7f5eb2', '#855583', '#067b58', '#a96e9a', '#09904d', '#087e38', '#055329', '#965f7b', '#065021', '#07672b', '#042901', '#a5667f', '#031c06', '#bd81bd', '#c57daa', '#0bbe5e', '#0bc86e', '#054025', '#099f5c', '#054007', '#042f17', '#08884a', '#d489b6', '#b26f89', '#000000', '#043628', '#065d3f', '#a2626d', '#0aaa5c', '#e595ca', '#d184a5', '#bf768c', '#965b69', '#b46f7a', '#09b78c', '#07795b', '#09a56b', '#0cc357', '#076c17', '#bc769a', '#0a9833', '#09a24d', '#088006', '#0ab23a', '#09cb78', '#099a3e', '#099a1a', '#e190bb', '#0aac25', '#0aac04', '#0ab96f', '#c87f8d', '#098604', '#c37e9b', '#0bb64e', '#0cda50', '#eda0dd', '#0cdf34', '#0cc446', '#b26263', '#09be5e', '#088915'],

['#00000000', '#6a2200', '#6f1f00', '#4d75ff', '#8d2700', '#738aff', '#6979d4', '#40509b', '#7d2200', '#524d7c', '#6263a0', '#3a2705', '#8a2400', '#2d1b15', '#9d2e00', '#a42d00', '#8db6ff', '#91bfff', '#403d8c', '#7398ff', '#433d1a', '#352d58', '#6482ff', '#b13100', '#942800', '#000000', '#303496', '#4c59ee', '#862300', '#81a3ff', '#bf3500', '#ae2f00', '#9f2a00', '#7d2100', '#952800', '#73afff', '#5974ff', '#759eff', '#9bbaff', '#5f6758', '#9c2a00', '#8992bf', '#7e9bff', '#667a15', '#84abd9', '#7fc2ff', '#7c93e9', '#7b9362', '#bb3400', '#81a48c', '#81a410', '#80b1ff', '#a62d00', '#738010', '#a22d00', '#8daeff', '#a0d0ff', '#c53a00', '#a3d5c5', '#a4bcff', '#942300', '#7db6ff', '#6f834e'],

     
    
    ]

    txn = await nftDescriptor.addManyPalettesToJacketPalette(jacketPalettes)
    await txn.wait()

    const jacketImage = [620, 800, 1060, 0, 10, 0, 1, 1, 29, 0, 9, 0, 1, 2, 1, 3, 29, 0, 6, 0, 1, 4, 1, 5, 2, 6, 1, 7, 29, 0, 5, 0, 1, 8, 2, 5, 2, 6, 1, 9, 29, 0, 4, 0, 1, 4, 1, 8, 2, 5, 1, 10, 2, 11, 29, 0, 3, 0, 1, 4, 2, 12, 1, 5, 1, 6, 1, 9, 1, 11, 1, 13, 29, 0, 2, 0, 1, 14, 1, 15, 1, 12, 1, 16, 1, 17, 1, 5, 1, 9, 1, 13, 1, 18, 16, 0, 1, 19, 12, 0, 2, 0, 1, 15, 1, 12, 1, 16, 1, 19, 1, 4, 1, 5, 1, 20, 1, 21, 1, 7, 15, 0, 1, 22, 1, 5, 1, 19, 11, 0, 1, 15, 2, 23, 1, 24, 1, 17, 1, 16, 1, 5, 2, 6, 1, 7, 1, 25, 13, 0, 1, 26, 1, 9, 3, 16, 1, 19, 10, 0, 1, 23, 2, 15, 1, 24, 1, 17, 4, 6, 1, 27, 1, 25, 13, 0, 1, 6, 4, 28, 1, 29, 1, 19, 9, 0, 1, 30, 1, 31, 1, 32, 1, 24, 1, 33, 1, 5, 2, 6, 1, 10, 1, 3, 1, 25, 10, 0, 1, 24, 1, 12, 1, 24, 2, 34, 3, 28, 1, 17, 1, 16, 2, 19, 1, 35, 6, 0, 1, 23, 1, 31, 1, 32, 1, 12, 1, 33, 3, 6, 1, 10, 1, 36, 1, 25, 10, 0, 4, 32, 1, 24, 1, 12, 1, 34, 2, 12, 1, 8, 3, 19, 1, 37, 5, 0, 1, 30, 1, 32, 1, 24, 1, 32, 1, 33, 1, 19, 2, 6, 1, 10, 1, 36, 1, 25, 10, 0, 1, 32, 2, 15, 4, 24, 4, 12, 1, 17, 1, 29, 2, 19, 4, 0, 1, 15, 1, 38, 1, 24, 1, 30, 1, 24, 1, 16, 2, 6, 1, 39, 1, 5, 1, 25, 10, 0, 1, 31, 2, 23, 2, 32, 2, 24, 1, 15, 1, 40, 1, 28, 1, 12, 1, 16, 1, 8, 1, 19, 1, 5, 1, 19, 3, 0, 1, 41, 1, 30, 1, 23, 1, 31, 1, 24, 1, 28, 1, 42, 1, 6, 1, 9, 1, 43, 1, 19, 9, 0, 1, 15, 1, 31, 1, 34, 1, 23, 1, 12, 2, 15, 1, 33, 1, 12, 1, 8, 1, 12, 1, 16, 1, 12, 1, 17, 1, 29, 1, 22, 1, 5, 1, 44, 1, 45, 1, 45, 1, 16, 1, 12, 1, 24, 1, 46, 1, 32, 1, 12, 1, 33, 1, 6, 1, 39, 1, 22, 1, 47, 9, 0, 2, 30, 1, 48, 2, 15, 1, 12, 1, 24, 1, 12, 1, 16, 1, 24, 1, 32, 2, 24, 1, 12, 1, 8, 2, 5, 1, 44, 1, 47, 1, 47, 1, 32, 1, 24, 1, 16, 1, 6, 1, 5, 1, 6, 1, 33, 1, 5, 1, 10, 1, 47, 1, 45, 1, 5, 8, 0, 1, 23, 1, 30, 1, 31, 1, 24, 1, 28, 1, 15, 1, 24, 1, 28, 1, 42, 1, 24, 1, 5, 1, 15, 1, 12, 1, 24, 1, 12, 2, 5, 3, 47, 1, 32, 1, 24, 1, 30, 1, 24, 1, 12, 4, 6, 1, 50, 1, 51, 1, 47, 7, 0, 1, 30, 4, 24, 1, 30, 3, 12, 4, 24, 1, 28, 1, 52, 1, 42, 2, 5, 1, 53, 1, 49, 1, 49, 1, 32, 1, 23, 1, 32, 1, 16, 1, 46, 1, 12, 1, 6, 1, 4, 1, 6, 1, 10, 1, 47, 1, 42, 1, 46, 6, 0, 1, 54, 1, 15, 1, 17, 1, 28, 2, 33, 1, 28, 1, 24, 1, 34, 1, 31, 1, 44, 4, 16, 1, 17, 1, 8, 1, 5, 1, 49, 2, 47, 1, 32, 1, 55, 2, 23, 1, 24, 1, 33, 1, 16, 1, 6, 1, 16, 1, 10, 1, 47, 1, 51, 1, 47, 5, 0, 1, 15, 1, 12, 1, 4, 1, 12, 1, 33, 1, 56, 1, 34, 1, 24, 1, 16, 1, 42, 1, 16, 1, 28, 1, 24, 1, 12, 1, 15, 2, 12, 1, 17, 1, 5, 1, 47, 1, 53, 1, 53, 1, 57, 2, 30, 1, 24, 1, 32, 1, 15, 1, 23, 1, 12, 1, 17, 1, 6, 1, 39, 2, 47, 1, 5, 4, 0, 1, 8, 1, 24, 1, 28, 1, 9, 1, 39, 1, 16, 1, 5, 2, 6, 1, 5, 2, 24, 1, 15, 1, 40, 1, 24, 1, 12, 1, 15, 2, 8, 1, 53, 1, 47, 1, 47, 1, 59, 1, 38, 1, 60, 2, 32, 1, 31, 2, 15, 1, 12, 1, 17, 1, 6, 1, 47, 1, 61, 1, 62, 3, 0, 1, 8, 1, 52, 1, 20, 1, 16, 1, 11, 1, 6, 1, 17, 1, 8, 1, 17, 1, 16, 1, 5, 1, 16, 1, 24, 3, 15, 1, 32, 1, 2, 1, 5, 1, 8, 1, 43, 1, 47, 1, 47]
    // const jacketImage = [619, 793, 1058, 0, 10, 0, 1, 1, 29, 0, 9, 0, 1, 2, 1, 3, 29, 0, 6, 0, 1, 4, 1, 5, 2, 6, 1, 7, 29, 0, 5, 0, 1, 8, 2, 5, 2, 6, 1, 9, 29, 0, 4, 0, 1, 4, 1, 8, 2, 5, 1, 10, 2, 11, 29, 0, 3, 0, 1, 4, 2, 12, 1, 5, 1, 6, 1, 9, 1, 11, 1, 13, 29, 0, 2, 0, 1, 14, 1, 15, 1, 12, 1, 16, 1, 17, 1, 5, 1, 9, 1, 13, 1, 18, 16, 0, 1, 19, 12, 0, 2, 0, 1, 15, 1, 12, 1, 16, 1, 19, 1, 4, 1, 5, 1, 20, 1, 21, 1, 7, 15, 0, 1, 22, 1, 5, 1, 19, 11, 0, 1, 15, 2, 23, 1, 24, 1, 17, 1, 16, 1, 5, 2, 6, 1, 7, 1, 25, 13, 0, 1, 26, 1, 9, 3, 16, 1, 19, 10, 0, 1, 23, 2, 15, 1, 24, 1, 17, 4, 6, 1, 27, 1, 25, 13, 0, 1, 6, 4, 28, 1, 29, 1, 19, 9, 0, 1, 30, 1, 31, 1, 32, 1, 24, 1, 33, 1, 5, 2, 6, 1, 10, 1, 3, 1, 25, 10, 0, 1, 24, 1, 12, 1, 24, 2, 34, 3, 28, 1, 17, 1, 16, 2, 19, 1, 35, 6, 0, 1, 23, 1, 31, 1, 32, 1, 12, 1, 33, 3, 6, 1, 10, 1, 36, 1, 25, 10, 0, 4, 32, 1, 24, 1, 12, 1, 34, 2, 12, 1, 8, 3, 19, 1, 37, 5, 0, 1, 30, 1, 32, 1, 24, 1, 32, 1, 33, 1, 19, 2, 6, 1, 10, 1, 36, 1, 25, 10, 0, 1, 32, 2, 15, 4, 24, 4, 12, 1, 17, 1, 29, 2, 19, 4, 0, 1, 15, 1, 38, 1, 24, 1, 30, 1, 24, 1, 16, 2, 6, 1, 39, 1, 5, 1, 25, 10, 0, 1, 31, 2, 23, 2, 32, 2, 24, 1, 15, 1, 40, 1, 28, 1, 12, 1, 16, 1, 8, 1, 19, 1, 5, 1, 19, 3, 0, 1, 41, 1, 30, 1, 23, 1, 31, 1, 24, 1, 28, 1, 42, 1, 6, 1, 9, 1, 43, 1, 19, 9, 0, 1, 15, 1, 31, 1, 34, 1, 23, 1, 12, 2, 15, 1, 33, 1, 12, 1, 8, 1, 12, 1, 16, 1, 12, 1, 17, 1, 29, 1, 22, 1, 5, 1, 44, 1, 45, 1, 45, 1, 16, 1, 12, 1, 24, 1, 46, 1, 32, 1, 12, 1, 33, 1, 6, 1, 39, 1, 22, 1, 47, 9, 0, 2, 30, 1, 48, 2, 15, 1, 12, 1, 24, 1, 12, 1, 16, 1, 24, 1, 32, 2, 24, 1, 12, 1, 8, 2, 5, 1, 44, 1, 47, 1, 47, 1, 32, 1, 24, 1, 16, 1, 6, 1, 5, 1, 6, 1, 33, 1, 5, 1, 10, 1, 47, 1, 45, 1, 5, 8, 0, 1, 23, 1, 30, 1, 31, 1, 24, 1, 28, 1, 15, 1, 24, 1, 28, 1, 42, 1, 24, 1, 5, 1, 15, 1, 12, 1, 24, 1, 12, 2, 5, 3, 47, 1, 32, 1, 24, 1, 30, 1, 24, 1, 12, 4, 6, 1, 50, 1, 51, 1, 47, 7, 0, 1, 30, 4, 24, 1, 30, 3, 12, 4, 24, 1, 28, 1, 52, 1, 42, 2, 5, 1, 53, 1, 49, 1, 49, 1, 32, 1, 23, 1, 32, 1, 16, 1, 46, 1, 12, 1, 6, 1, 4, 1, 6, 1, 10, 1, 47, 1, 42, 1, 46, 6, 0, 1, 54, 1, 15, 1, 17, 1, 28, 2, 33, 1, 28, 1, 24, 1, 34, 1, 31, 1, 44, 4, 16, 1, 17, 1, 8, 1, 5, 1, 49, 2, 47, 1, 32, 1, 55, 2, 23, 1, 24, 1, 33, 1, 16, 1, 6, 1, 16, 1, 10, 1, 47, 1, 51, 1, 47, 5, 0, 1, 15, 1, 12, 1, 4, 1, 12, 1, 33, 1, 56, 1, 34, 1, 24, 1, 16, 1, 42, 1, 16, 1, 28, 1, 24, 1, 12, 1, 15, 2, 12, 1, 17, 1, 5, 1, 47, 1, 53, 1, 53, 1, 57, 2, 30, 1, 24, 1, 32, 1, 15, 1, 23, 1, 12, 1, 17, 1, 6, 1, 39, 2, 47, 1, 5, 4, 0, 1, 8, 1, 24, 1, 28, 1, 9, 1, 39, 1, 16, 1, 5, 2, 6, 1, 5, 2, 24, 1, 15, 1, 40, 1, 24, 1, 12, 1, 15, 2, 8, 1, 53, 1, 47, 1, 47, 1, 59, 1, 38, 1, 60, 2, 32, 1, 31, 2, 15, 1, 12, 1, 17, 1, 6, 1, 47, 1, 61, 1, 62, 3, 0, 1, 8, 1, 52, 1, 20, 1, 16, 1, 11, 1, 6, 1, 17, 1, 8, 1, 17, 1, 16, 1, 5, 1, 16, 1, 24, 3, 15, 1, 32, 1, 2, 1, 5, 1, 8, 1, 43, 1, 47, 1, 47]
    txn = await nftDescriptor.addJacket(jacketImage)
    await txn.wait()

    //______________________________________________________________________________________________________


    const seed = await nftSeeder.connect(addr1).generateSeed(nftDescriptor.address);
    // SEED STRUCTURE = [skin, skinPalette, jacket, jacketPalette, head, headPalette]
    console.log(seed)
   
    const skin = await nftDescriptor.getSkin(seed[0])
    const skinPalette = await nftDescriptor.getSkinPalette(seed[1])
    const jacket = await nftDescriptor.getJacket(seed[2])
    const jacketPalette = await nftDescriptor.getJacketPalette(seed[3])
    const head = await nftDescriptor.getHead(seed[4])
    const headPalette = await nftDescriptor.getHeadPalette(seed[5])
    
    const mySeed = {
      skin: skin,
      skinPalette: skinPalette,
      jacket: jacket,
      jacketPalette: jacketPalette,
      head: head,
      headPalette: headPalette
    }
    const url = await RLEtoSVG(mySeed);
    txn = await nftDescriptor.makeAnEpicNFT(seed, url)
    await txn.wait()

  });
});


